<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Bus-based Cache Simulator: Template File Generation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom_doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Bus-based Cache Simulator
   &#160;<span id="projectnumber">v3.0</span>
   </div>
   <div id="projectbrief">A tool for education in computing - learn about coherence protocols, replacement policies, and SMP vs DSM</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Template File Generation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md22">Template Options</a><ul><li class="level2"><a href="#autotoc_md23">Option 1: Coherence Protocol Source File</a></li>
<li class="level2"><a href="#autotoc_md24">Option 2: Directory Protocol Source File</a></li>
<li class="level2"><a href="#autotoc_md25">Option 3: Replacement Policy Source File</a></li>
<li class="level2"><a href="#autotoc_md26">Option 4: Interactive Mode Source File</a></li>
<li class="level2"><a href="#autotoc_md27">Option 5: Generic Source File</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md28">Template Generation Script</a></li>
</ul>
</div>
<div class="textblock"><p>The template file generation script is designed to automate the boilerplate code. It generates the interface, allowing the programmer to jump straight to programming the implementation. The three different templates are explained below.</p>
<h1><a class="anchor" id="autotoc_md22"></a>
Template Options</h1>
<h2><a class="anchor" id="autotoc_md23"></a>
Option 1: Coherence Protocol Source File</h2>
<p>The name of the coherence protocol is in <code>TitleCase</code>. This will create a source and header file pair in the <code>src/coherence</code> directory from the template files. The class will contain blank (default behavior) methods ready to accept the concrete implementation of the specific coherence protocol.</p>
<p>Note:: The <code><a class="el" href="classCoherenceProtocol.html" title="The base class for coherence protocols.">CoherenceProtocol</a></code> base class is abstract, specifically, the <code><a class="el" href="classCoherenceProtocol.html#a8dd85728d8f271246ddc4cd1280a16d0" title="Receive a PrRd message.">CoherenceProtocol::PrRd</a></code>, <code><a class="el" href="classCoherenceProtocol.html#ac7eaf8a314aafd25da429c25f43cd901" title="Receive a PrWr message.">CoherenceProtocol::PrWr</a></code>, <code><a class="el" href="classCoherenceProtocol.html#ae25fe271fd4a7254081997a6a2aeffd6" title="Receive a BusRd message.">CoherenceProtocol::BusRd</a></code>, and <code><a class="el" href="classCoherenceProtocol.html#a0fc2bc048dffa6b82b179d089f351551" title="Determine whether a line needs to be written back to main memory.">CoherenceProtocol::isWriteBackNeeded</a></code> methods require implementation in the specific coherence protocol. The remaining methods are optional to cater to different coherence protocols and the bus messages they use. For instance, the <code><a class="el" href="classDragon.html" title="The Dragon coherence protocol.">Dragon</a></code> protocol only reimplements the <code><a class="el" href="classDragon.html#adbb1d5127d0800911ab76b9c8f575ee2" title="Receive a BusUpdt message.">Dragon::BusUpdt</a></code> and <code><a class="el" href="classDragon.html#acf96fdcf36f5a6ce461b84922e453995" title="Determine whether the coherence protocol does dirty sharing.">Dragon::doesDirtySharing</a></code> methods.</p>
<h2><a class="anchor" id="autotoc_md24"></a>
Option 2: Directory Protocol Source File</h2>
<p>The name of the directory protocol is in <code>TitleCase</code>. This will create a source and header file pair in the <code>src/directory</code> directory from the template files. The class will contain blank (default behavior) methods ready to accept the concrete implementation of the specific directory protocol.</p>
<p>Note:: The base class for directory protocols is <code><a class="el" href="classMemorySystem.html" title="The MemorySystem class connecting multiple caches and main memory.">MemorySystem</a></code>, since it is simpler and more efficient (programmatically). The <code><a class="el" href="classMemorySystem.html" title="The MemorySystem class connecting multiple caches and main memory.">MemorySystem</a></code> base class is abstract, specifically, the <code><a class="el" href="classMemorySystem.html#a13052a5711ea0996511e1fe4fcfabb04" title="Issue a bus message from a cache to all other caches.">MemorySystem::issueBusMsg</a></code> method requires implementation in the specific directory protocol.</p>
<h2><a class="anchor" id="autotoc_md25"></a>
Option 3: Replacement Policy Source File</h2>
<p>The name of the replacement policy is in <code>TitleCase</code>. This will create a source and header file pair in the <code>src/replacement</code> directory from the template files. The class will contain blank (default behavior) methods ready to accept the concrete implementation of the specific replacement policy.</p>
<p>Note:: The <code><a class="el" href="classReplacementPolicy.html" title="The base class for replacement policies.">ReplacementPolicy</a></code> base class contains default implementations for all methods, so if the specific replacement policy does not require one of them to operate correctly, it can be entirely removed from the header and source files. For instance, the random replacement (<code><a class="el" href="classRR.html" title="The RR replacement policy.">RR</a></code>) policy does not reimplement the <code><a class="el" href="classReplacementPolicy.html#a67a0cbb97c828a4dbbd3b8e13f500db3" title="Notify the replacement policy that a line was just accessed.">ReplacementPolicy::touch</a></code> method.</p>
<h2><a class="anchor" id="autotoc_md26"></a>
Option 4: Interactive Mode Source File</h2>
<p>The name of the interactive mode cache is in <code>TitleCase</code>. This will create a source and header file pair in the <code>src/interactive</code> directory from the template files. The class will contain blank (default behavior) methods ready to accept the concrete implementation of the specific replacement policy.</p>
<p>Note:: The <code><a class="el" href="classInteractiveMode.html" title="The InteractiveMode abstract base class.">InteractiveMode</a></code> base class is abstract, most methods require implementation in the specific interactive mode cache. Only <code><a class="el" href="classInteractiveMode.html#ab2a64adbe718c6ae1aaebdb932860588" title="Issue a BusRd message to neighboring caches.">InteractiveMode::issueBusMsg</a></code> and <code><a class="el" href="classInteractiveMode.html#a2888a7cb647bee0b5943d330540a0b82" title="Get the state of a line in the cache.">InteractiveMode::getLineState</a></code> have default implementations making them optional in the specific interactive mode cache. They exist to cater to the different needs of the policy/protocol used. For instance, the <a class="el" href="classInteractiveModeReplacer.html" title="The InteractiveMode class for replacement policies.">InteractiveModeReplacer</a> class does not issue bus messages and thus does not implement the <code><a class="el" href="classInteractiveMode.html#ab2a64adbe718c6ae1aaebdb932860588" title="Issue a BusRd message to neighboring caches.">InteractiveMode::issueBusMsg</a></code> method.</p>
<h2><a class="anchor" id="autotoc_md27"></a>
Option 5: Generic Source File</h2>
<p>This mode is the simplest: Specify a file name in <code>snake_case</code>, and a blank (minimal) source and header file pair using that file name appears in the <code>src</code> directory.</p>
<h1><a class="anchor" id="autotoc_md28"></a>
Template Generation Script</h1>
<p>Note:: This script is located in the <code>template</code> directory, but can be run from anywhere.</p>
<p>Usage:</p><ol type="1">
<li><code>./mksrc.sh coherence &lt;class_name&gt; &lt;states..&gt;</code></li>
<li><code>./mksrc.sh directory|interactive|replacement &lt;class_name&gt;</code></li>
<li><code>./mksrc.sh &lt;file_name&gt;</code></li>
</ol>
<ul>
<li><code>class_name</code>: The name of the new policy/protocol (TitleCase)</li>
<li><code>file_name</code>: The file name of the generic source files (snake_case)</li>
<li><code>states..</code>: The list of states in the coherence protocol's state transition graph. Chose at least two of <code>I</code>, <code>D</code>, <code>E</code>, <code>M</code>, <code>V</code>, <code>O</code>, <code>S</code>, <code>Sc</code>, and <code>Sm</code> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
